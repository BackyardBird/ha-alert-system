title: Alert System
cards:
  - type: vertical-stack
    cards:
      - type: markdown
        content: |
          # 🚨 Threshold Alert Management
          Create and manage automatic threshold alerts for your sensors.
      - type: entities
        title: 📊 System Status
        show_header_toggle: false
        entities:
          - entity: input_boolean.threshold_alerts_enabled
            name: Enable Threshold Alerts
            icon: mdi:toggle-switch
          - entity: input_select.threshold_alert_channel
            name: Default Alert Channel
            icon: mdi:message-alert
          - entity: sensor.threshold_alert_status
            name: Status
            icon: mdi:shield-check
          - entity: sensor.threshold_alert_count
            name: Total Alerts Configured
            icon: mdi:counter
      - type: horizontal-stack
        cards:
          - show_name: true
            show_icon: true
            type: button
            tap_action:
              action: call-service
              service: script.list_threshold_alerts
            name: 📋 List All
            icon: mdi:format-list-bulleted
          - type: button
            tap_action:
              action: call-service
              service: script.test_threshold_alert
            name: 🧪 Test System
            icon: mdi:test-tube
          - type: button
            tap_action:
              action: call-service
              service: script.clear_all_threshold_alerts
            confirmation:
              text: Are you sure you want to remove all threshold alerts?
            name: 🗑️ Clear All
            icon: mdi:delete-sweep
      - type: entities
        title: ➕ Create Custom Alert
        show_header_toggle: false
        entities:
          - entity: input_text.temp_threshold_entity
            name: Entity ID
            icon: mdi:target
          - entity: input_text.temp_threshold_value
            name: Threshold Value
            icon: mdi:numeric
          - entity: input_select.temp_threshold_condition
            name: Condition
            icon: mdi:compare
          - entity: input_text.temp_threshold_message
            name: Custom Message (Optional)
            icon: mdi:message-text
      - show_name: true
        show_icon: true
        type: button
        tap_action:
          action: call-service
          service: script.create_threshold_alert_from_form
        name: ✅ Create Alert
        icon: mdi:plus-circle
      - type: markdown
        title: 🔍 How to Find Entity IDs
        content: >
          **To find entity IDs for sensors:**

          1. **Developer Tools → States** - Search for sensors

          2. **Settings → Devices & Services → Entities** - Browse all entities

          3. **Copy entity IDs** like `sensor.living_room_temperature`

          **Common sensor patterns:**

          - Temperature: `sensor.*temperature*`
          - Battery: `sensor.*battery*`
          - Humidity: `sensor.*humidity*`
          - Power: `sensor.*power*`

          **Examples:**

          - `sensor.bedroom_temperature`
          - `sensor.phone_battery_level`
          - `sensor.living_room_humidity`
      - type: entities
        title: ➖ Remove Alert
        show_header_toggle: false
        entities:
          - entity: input_text.temp_remove_entity
            name: Entity ID to Remove
            icon: mdi:target
      - type: button
        tap_action:
          action: call-service
          service: script.remove_threshold_alert_from_form
        name: 🗑️ Remove Alert
        icon: mdi:delete
      - type: markdown
        content: |
          ## 📖 How to Use This Card

          ### Creating Custom Alerts:
          1. **Find your entity ID** using Developer Tools → States
          2. **Copy the entity_id** (like `sensor.living_room_temperature`)
          3. **Paste it** into the "Entity ID" field above
          4. **Set threshold** and condition (above/below)
          5. **Add custom message** (optional)
          6. **Click "Create Alert"**

          ### Managing Alerts:
          - **List All**: See current alerts and their status
          - **Remove**: Enter entity_id in remove section
          - **Clear All**: Remove all configured alerts (with confirmation)

          ### Tips:
          - Entity IDs look like: `sensor.bedroom_temperature`
          - You can set multiple thresholds for the same entity
          - Alerts use your configured channel (main/technical/both)
          - Test the system after adding new alerts

  - type: vertical-stack
    cards:
      - type: markdown
        content: >
          # 📘 Binary Sensor Automation Generator

          Create Home Assistant automations for binary sensors with your alert system.
      - type: entities
        title: ⚙️ Automation Builder
        show_header_toggle: false
        entities:
          - entity: input_text.binary_automation_entity
            name: 🎯 Binary Sensor
            icon: mdi:target
          - entity: input_select.binary_automation_trigger_state
            name: 🔀 Trigger State
            icon: mdi:state-machine
          - entity: input_text.binary_automation_message
            name: 💬 Alert Message
